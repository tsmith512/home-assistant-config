#       _
#  __ _| | _____  ____ _
# / _` | |/ _ \ \/ / _` |
#| (_| | |  __/>  < (_| |
# \__,_|_|\___/_/\_\__,_|
#
# Intents for Alexa to respond via the Skills API.
# Does not include device control; Haaska handles Smart Home Skill
# API integration. (See https://github.com/auchter/haaska)
#
# NOTE: 01/2020 need to figure out what's happening, but looks like
# there's a newer fork of Haaska at https://github.com/mike-grant/haaska
# but it's also a bit outdated.

smart_home:
  filter:
    include_domains:
      - switch
      - light
      - scene
    include_entities:
      - group.lights_downstairs
      - group.lights_bedroom
    exclude_domains:
      - sensor
    exclude_entities:
      - script.upstairs_sunrise

intents:
  # OCTOPRINT STATUS
  PrinterStatusIntent:
    speech:
      type: plaintext
      text: >
        The printer is {{ states("sensor.octoprint_current_state") | lower }}
        {% if is_state("binary_sensor.octoprint_printing", "on") %}
          and the job is {{ states("sensor.octoprint_job_percentage") | round }} percent complete
        {% else %}
          and not currently printing
        {% endif %}.

  # DARK SKY WEATHER REPORT
  WeatherIntent:
    speech:
      type: plaintext
      text: >
        Dark Sky reports
        {{ states('sensor.dark_sky_hourly_summary') | lower | replace('.','') }}
        and {{ states('sensor.dark_sky_temperature') | round }} degrees.
        It feels like {{ states('sensor.dark_sky_apparent_temperature') | round }},
        with {{ states('sensor.dark_sky_wind_speed') | round }} mile per hour winds
        and {{ states('sensor.dark_sky_humidity') | round }} percent humidity.
        Today's high is {{ states('sensor.dark_sky_daily_high_temperature') | round }} degrees
        with an overnight low of {{ states('sensor.dark_sky_daily_low_temperature') | round }}.
        Expect {{ states('sensor.dark_sky_daily_summary') | lower }}.
